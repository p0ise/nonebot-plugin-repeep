# nonebot-plugin-repeep

## 简介

群内或向机器人私聊输入指令：/leakip、/谁在窥屏、/查查成分

机器人会显示当前在看群消息的成员信息，目前电脑端不会显示。

预计解决了IP位置信息接口的问题就会开源，欢迎大家加入测试或开发。

## 实现原理

机器人基于python的nonebot2框架，QQ协议基于go-cqhttp。

插件实现原理是QQ的跨站请求伪造。通过图片调起GET方法访问接口，从而获取客户端IP和UA信息。

然后IP，获取定位信息。暂时基于QQZeng的IP位置离线数据库。

根据UA，获取设备信息。基于user_agents库，增加中文优化和型号名称优化。

CSRF原理参考：https://cloud.tencent.com/developer/article/1933686

## 开发计划

- [ ] 优化信息样式，拟采用HTML渲染输出图片
- [ ] 增加指令选项，指定获取目标群、用户信息
- [ ] 优化基于UA的设备识别
- [ ] 增加对电脑的检测
- [ ] 智能选择CSRF方法
- [ ] 优化远程接口速度
- [ ] 优化IP位置数据精准度